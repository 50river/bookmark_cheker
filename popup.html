<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <title>Bookmark Link Checker</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
	body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; width: 380px; margin: 0; padding: 12px; }
	h1 { font-size: 16px; margin: 0 0 8px; }
	button { padding: 8px 12px; border: 0; border-radius: 8px; cursor: pointer; }
	.primary { background: #1a73e8; color: white; }
	.muted { background: #eee; }
	.row { display:flex; gap:8px; align-items:center; margin: 8px 0; }
	progress { width: 100%; height: 12px; }
	.small { font-size: 12px; color:#666; }
	.list { max-height: 320px; overflow: auto; border: 1px solid #ddd; border-radius: 8px; }
	table { width: 100%; border-collapse: collapse; font-size: 12px; }
	th, td { padding: 8px; border-bottom: 1px solid #eee; vertical-align: top; }
	th { position: sticky; top: 0; background: #fafafa; z-index: 1; }
	.status-bad { color: #b00020; font-weight: 600; }
	.status-ok { color: #137333; font-weight: 600; }
	.nowrap { white-space: nowrap; }
	.actions { display:flex; justify-content: space-between; gap:8px; margin-top: 8px; }
	.pill { display:inline-block; padding:2px 6px; border-radius:999px; background:#f3f4f6; }
	.folder { color:#374151; }
	.link { color: #1a73e8; text-decoration: none; }
  </style>
</head>
<body>
  <h1>Bookmark Link Checker</h1>

  <div class="row">
	<button id="scan" class="primary">リンク切れをスキャン</button>
	<button id="export" class="muted">CSVエクスポート</button>
  </div>

  <div id="progressWrap" style="display:none;">
	<div class="row">
	  <progress id="progress" value="0" max="100"></progress>
	</div>
	<div class="small" id="progressText">準備中…</div>
  </div>

  <div id="summary" class="small" style="margin:8px 0;"></div>

  <div class="actions" id="bulkActions" style="display:none;">
	<div>
	  <label><input type="checkbox" id="selectAll" /> すべて選択</label>
	  <span class="pill"><span id="selectedCount">0</span> 件選択中</span>
	</div>
	<button id="delete" class="primary">選択を削除</button>
  </div>

  <div class="list" id="list" style="display:none;">
	<table>
	  <thead>
		<tr>
		  <th><input type="checkbox" id="selectHeader"></th>
		  <th>タイトル</th>
		  <th>URL</th>
		  <th class="nowrap">ステータス</th>
		  <th>フォルダ</th>
		</tr>
	  </thead>
	  <tbody id="tbody"></tbody>
	</table>
  </div>

  <script src="popup.js"></script>
</body>
</html>